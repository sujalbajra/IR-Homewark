{% extends "base_admin.html" %}

{% block title %}Spell Checker - Nepali IR{% endblock %}

{% block content %}
<div class="row gap-20 masonry pos-r">
    <div class="masonry-sizer col-md-6"></div>
    <div class="masonry-item w-100">
        <div class="row gap-20">
            <!-- Theory Section -->
            <div class="col-md-12">
                <div class="layers bd bgc-white p-20">
                    <div class="layer w-100 mB-10">
                        <h4 class="lh-1 c-grey-900">‚ú® Spell Corrector</h4>
                    </div>
                    <div class="layer w-100">
                        <p class="c-grey-900">Finds close matches for misspelled words using Minimum Edit Distance.</p>
                        <div class="alert alert-info mB-0">
                            <strong>Minimum Edit Distance:</strong> The number of operations (insertions, deletions,
                            substitutions) needed to transform one string into another.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search Section -->
            <div class="col-md-6">
                <div class="bgc-white bd bdrs-3 p-20 mB-20">
                    <h4 class="c-grey-900 mB-20">üîç Check Spelling</h4>

                    <div class="bgc-grey-100 p-15 bdrs-4 mB-20">
                        <strong class="d-b mB-10">Quick Examples (Misspelled):</strong>
                        <div class="peers fxw-nw ai-c gap-10">
                            <button type="button" onclick="document.querySelector('input[name=word]').value='‡§®‡•á‡§™‡§≤'"
                                class="peer btn btn-outline-primary btn-sm">‡§®‡•á‡§™‡§≤</button>
                            <button type="button" onclick="document.querySelector('input[name=word]').value='‡§∏‡§∞‡§ï‡§∞'"
                                class="peer btn btn-outline-primary btn-sm">‡§∏‡§∞‡§ï‡§∞</button>
                            <button type="button"
                                onclick="document.querySelector('input[name=word]').value='‡§¨‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä'"
                                class="peer btn btn-outline-primary btn-sm">‡§¨‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä</button>
                        </div>
                    </div>

                    <form method="POST">
                        <div class="mb-3">
                            <label class="form-label fw-500">Enter Word</label>
                            <input type="text" name="word" class="form-control" placeholder="e.g., ‡§®‡•á‡§™‡§≤"
                                value="{{ word if word else '' }}" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Suggest Corrections</button>
                    </form>
                </div>
            </div>

            <!-- Results Section -->
            <div class="col-md-6">
                <div class="bgc-white bd bdrs-3 p-20 mB-20 h-100">
                    <h4 class="c-grey-900 mB-20">üìã Suggestions</h4>

                    {% if suggestions %}
                    <div class="layer w-100">
                        <h6 class="c-grey-900 mB-15">Matches for: <span class="c-blue-500">{{ word }}</span></h6>

                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Suggestion</th>
                                        <th>Distance</th>
                                        <th>Confidence</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for suggestion, distance in suggestions %}
                                    <tr>
                                        <td class="fw-bold">{{ suggestion }}</td>
                                        <td>{{ distance }}</td>
                                        <td>
                                            {% if distance == 0 %}
                                            <span class="badge bgc-green-50 c-green-700">Exact Match</span>
                                            {% elif distance == 1 %}
                                            <span class="badge bgc-blue-50 c-blue-700">High</span>
                                            {% else %}
                                            <span class="badge bgc-orange-50 c-orange-700">Medium</span>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                        <p class="fsz-sm c-grey-600 mT-10 mB-0">
                            * Suggestions drawn from vocabulary.
                        </p>
                    </div>
                    {% elif word %}
                    <div class="alert alert-warning mB-0">
                        No suggestions found in the current vocabulary.
                    </div>
                    {% else %}
                    <div class="d-flex align-items-center justify-content-center h-100 text-muted">
                        Enter a word to check spelling
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}